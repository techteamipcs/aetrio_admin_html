"use strict";(self.webpackChunkaetrio_dashboard_angular=self.webpackChunkaetrio_dashboard_angular||[]).push([[355],{1355:(V,C,l)=>{l.r(C),l.d(C,{ClientModule:()=>z});var g=l(6895),d=l(8869),e=l(4650),s=l(433),h=l(262),f=l(529),p=l(2843),c=l(2340);let v=(()=>{class n{constructor(i){this.http=i,this.getClient=t=>this.http.post(c.N.baseUrl+"/api/client/clientgetall",t,this.getRequestHeaders()).pipe((0,h.K)(a=>(0,p._)(a))),this.getClientById=t=>this.http.post(c.N.baseUrl+"/api/client/clientgetbyid",t,this.getRequestHeaders()).pipe((0,h.K)(a=>(0,p._)(a))),this.clientadd=t=>this.http.post(c.N.baseUrl+"/api/client/clientadd",t,this.getRequestHeaders()).pipe((0,h.K)(a=>(0,p._)(a))),this.clientupdate=(t,o)=>{let a=c.N.baseUrl+"/api/client/clientupdate";return o&&(a+=`?id=${o}`),this.http.post(a,t,this.getRequestHeaders()).pipe((0,h.K)(u=>(0,p._)(u)))},this.clientdelete=t=>this.http.post(c.N.baseUrl+"/api/client/clientdelete",t,this.getRequestHeaders()).pipe((0,h.K)(a=>(0,p._)(a)))}getRequestHeaders(){let i;const t=localStorage.getItem("aetrio-token");return i=new f.WM({Authorization:`Bearer ${t}`}),{headers:i}}}return n.\u0275fac=function(i){return new(i||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=l(6570),_=l(9207),Z=l(6913);function q(n,r){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.hij(" ",i.throw_msg," ")}}function y(n,r){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.hij(" ",i.throw_msg," ")}}function x(n,r){1&n&&(e.TgZ(0,"span",38),e._uU(1,"Client Name is required"),e.qZA())}function w(n,r){1&n&&(e.TgZ(0,"span",38),e._uU(1,"Please Enter the 30 length Client Name"),e.qZA())}function I(n,r){1&n&&(e.TgZ(0,"span",38),e._uU(1,"short Description is required"),e.qZA())}function N(n,r){1&n&&(e.TgZ(0,"span",38),e._uU(1,"Description is required"),e.qZA())}function M(n,r){1&n&&(e.TgZ(0,"span",38),e._uU(1,"Link is required"),e.qZA())}function S(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"div",39),e._UZ(1,"img",40),e.TgZ(2,"a",41),e.NdJ("click",function(){const a=e.CHM(i).index,u=e.oxw();return e.KtG(u.removeImage(a))}),e._UZ(3,"i",42),e.qZA()()}if(2&n){const i=r.$implicit,t=e.oxw();e.xp6(1),e.hYB("src","",t.imagePath,"",i,"",e.LSH)}}let b=(()=>{class n{constructor(i,t,o,a,u){this.route=i,this.formBuilder=t,this.router=o,this.toast=a,this.dataService=u,this.clientMultiImages=[],this.submitted=!1,this.msg_success=!1,this.msg_danger=!1,this.isEdit="edit"===this.route.snapshot.data.title,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"200px",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"career_box",name:"Rajdhani sans-serif"}]},this.hasError=(D,H)=>this.clientForm.controls[D].hasError(H),this.imagePath=c.N.baseUrl+"/public/",this.uploadInput=new e.vpe,this.clientForm=this.formBuilder.group({name:["",[s.kI.required,s.kI.maxLength(255)]],desc_short:["",s.kI.required],desc_long:["",s.kI.required],link:["",s.kI.required],status:["true",s.kI.required]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.isEdit?(this.addData(this.id),this.applyAction="Update"):this.applyAction="Add"}addData(i){this.dataService.getClientById({_id:i}).subscribe(o=>{if(200===o.status){let a=o?.data;this.clientImage=a?.image,this.clientMultiImages=a?.client_images,this.clientForm.patchValue({name:a?.name,desc_short:a?.desc_short,desc_long:a?.desc_long,link:a?.link,status:a?.status}),this.submitted=!0}else this.submitted=!1,this.msg_success=!1,this.msg_danger=!0})}onSubmit(){this.submitted=!0;let i=this.clientForm.value,t=this.id;i.image=this.clientImage,i.client_images=this.clientMultiImages,!this.clientForm.invalid&&(this.isEdit?this.dataService.clientupdate(i,t).subscribe(o=>{200==o.status?(this.msg_success=!0,this.toast.successToastr(o.message),setTimeout(()=>{this.router.navigate(["/client/view"])},2e3)):this.toast.errorToastr(o.message)}):this.dataService.clientadd(i).subscribe(o=>{200==o.status?(this.toast.successToastr(o.message),setTimeout(()=>{this.router.navigate(["/client/view"])},2e3)):400==o.code&&this.toast.errorToastr(o.message)}))}onUploadOutput(i){"allAddedToQueue"===i.type?this.uploadInput.emit({type:"uploadAll",url:c.N.baseUrl+"/api/home/addimage",method:"POST",data:{}}):"done"===i.type&&typeof i.file<"u"&&(this.clientImage=i.file.response.result,this.clientMultiImages.push(i.file.response.result))}onCancel(){this.router.navigate(["/client/view"])}removeImage(i){confirm("Are you sure to delete this image")&&this.clientMultiImages.splice(i,1)}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(d.gz),e.Y36(s.qu),e.Y36(d.F0),e.Y36(U.eP),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-add"]],decls:66,vars:11,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"min-height","400px","background-size","cover","background-position","center top"],[1,"mask","bg-gradient-info","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"text-white","mt-0","mb-5"],[1,"container-fluid","mt--7"],[1,"col-xl-12","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],["class","alert alert-success alert-dismissable","style","margin-left: 0;",4,"ngIf"],["class","alert alert-danger alert-dismissable","style","margin-left: 0;",4,"ngIf"],[1,"card-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","name","name","autocomplete","off","formControlName","name","placeholder","Client Name",1,"form-control"],["class","alert-danger",4,"ngIf"],["type","text","name","desc_short","autocomplete","off","formControlName","desc_short","placeholder","Short Desc",1,"form-control"],["name","desc_long","formControlName","desc_long",3,"config"],["type","text","name","link","autocomplete","off","formControlName","link","placeholder","Client Link",1,"form-control"],["type","file","ngFileSelect","",3,"uploadInput","uploadOutput"],["uploader",""],["for","exampleInputEmail1",2,"display","block"],["class","col-md-2",4,"ngFor","ngForOf"],["name","status","formControlName","status",1,"form-control"],["value","true"],["value","false"],[1,"box-footer"],["type","submit",1,"btn","btn-primary"],["type","cancel",1,"btn","btn-danger",3,"click"],[1,"alert","alert-success","alert-dismissable",2,"margin-left","0"],[1,"alert","alert-danger","alert-dismissable",2,"margin-left","0"],[1,"alert-danger"],[1,"col-md-2"],["alt","logo",2,"height","100px","width","100px",3,"src"],["href","javascript:;",1,"small-box-footer",3,"click"],["aria-hidden","true",1,"fa","fa-trash",2,"color","red"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Client Information "),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"This is your profile page. You can see the progress you've made with your work and manage your client or assigned tasks"),e.qZA()()()()(),e.TgZ(9,"div",7)(10,"div",3)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13),e._uU(17,"Edit Client"),e.qZA()()(),e.YNc(18,q,2,1,"div",14),e.YNc(19,y,2,1,"div",15),e.qZA(),e.TgZ(20,"div",16)(21,"form",17),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(22,"div",18)(23,"div",19)(24,"label",20),e._uU(25,"Client Name"),e.qZA(),e._UZ(26,"input",21),e.YNc(27,x,2,0,"span",22),e.YNc(28,w,2,0,"span",22),e.qZA(),e.TgZ(29,"div",19)(30,"label",20),e._uU(31,"Short Desc"),e.qZA(),e._UZ(32,"input",23),e.YNc(33,I,2,0,"span",22),e.qZA(),e.TgZ(34,"div",19)(35,"label",20),e._uU(36,"Description"),e.qZA(),e._UZ(37,"angular-editor",24),e.YNc(38,N,2,0,"span",22),e.qZA(),e.TgZ(39,"div",19)(40,"label",20),e._uU(41,"Link"),e.qZA(),e._UZ(42,"input",25),e.YNc(43,M,2,0,"span",22),e.qZA(),e.TgZ(44,"div",19)(45,"label",20),e._uU(46,"Client Image"),e.qZA(),e.TgZ(47,"input",26,27),e.NdJ("uploadOutput",function(a){return t.onUploadOutput(a)}),e.qZA(),e.TgZ(49,"label",28),e._uU(50,"(Required Size 141 * 141)"),e.qZA(),e.TgZ(51,"div",3),e.YNc(52,S,4,2,"div",29),e.qZA()(),e.TgZ(53,"div",19)(54,"label",20),e._uU(55,"Status"),e.qZA(),e.TgZ(56,"select",30)(57,"option",31),e._uU(58,"Active"),e.qZA(),e.TgZ(59,"option",32),e._uU(60,"InActive"),e.qZA()()()(),e.TgZ(61,"div",33)(62,"button",34),e._uU(63,"Submit"),e.qZA(),e.TgZ(64,"button",35),e.NdJ("click",function(){return t.onCancel()}),e._uU(65,"Cancel"),e.qZA()()()()()()()()),2&i&&(e.xp6(18),e.Q6J("ngIf",t.msg_success),e.xp6(1),e.Q6J("ngIf",t.msg_danger),e.xp6(2),e.Q6J("formGroup",t.clientForm),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.hasError("name","required")),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.hasError("name","maxlength")),e.xp6(5),e.Q6J("ngIf",t.submitted&&t.hasError("desc_short","required")),e.xp6(4),e.Q6J("config",t.editorConfig),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.hasError("desc_long","required")),e.xp6(5),e.Q6J("ngIf",t.submitted&&t.hasError("link","required")),e.xp6(4),e.Q6J("uploadInput",t.uploadInput),e.xp6(5),e.Q6J("ngForOf",t.clientMultiImages))},dependencies:[g.sg,g.O5,_.s6,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,Z.qx]}),n})();var m=l(5826),J=l(8601),A=l(4417),T=l(3189),F=l(9972);function L(n,r){1&n&&(e.TgZ(0,"td",21)(1,"div",22),e._uU(2," Client List is Empty "),e.qZA()())}function Y(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e._UZ(3,"td",23),e.TgZ(4,"td"),e._UZ(5,"img",24),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td")(12,"a",25),e._UZ(13,"i",26),e.qZA(),e.TgZ(14,"a",27),e.NdJ("click",function(){const a=e.CHM(i).$implicit,u=e.oxw();return e.KtG(u.clientDelete(a._id))}),e._UZ(15,"i",28),e.qZA()()()}if(2&n){const i=r.$implicit,t=e.oxw();e.xp6(2),e.Oqu(i.name),e.xp6(1),e.Q6J("innerHTML",i.desc_short,e.oJD),e.xp6(2),e.hYB("src","",t.imagePath,"",i.image,"",e.LSH),e.xp6(2),e.Oqu(1==i.status?"Active":"Deactive"),e.xp6(2),e.Oqu(e.xi3(10,7,i.created_at,"dd/MMM/yyyy hh:mm a")),e.xp6(3),e.MGl("routerLink","/client/edit/",i._id,"")}}function E(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"div",29)(1,"app-pagination",30,31),e.NdJ("changePage",function(o){e.CHM(i);const a=e.oxw();return e.KtG(a.onListChangePage(o))}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("initialPage",i.currentPage)("count",i.totalRecord)}}let k=(()=>{class n{constructor(i,t){this.router=i,this.dataService=t,this.msg_danger=!1,this.currentPage=1,this.initialized=!1,this.currentLimit=10,this.totalRecord=0,this.searchText="",this.config={value:!0,name:"",disabled:!1,height:25,width:90,margin:3,fontSize:10,speed:300,color:{checked:"#36aef5",unchecked:"#423f3f"},switchColor:{checked:"#3366FF",unchecked:"crimson"},labels:{unchecked:"Deactive",checked:"Active"},checkedLabel:"",uncheckedLabel:"",fontColor:{checked:"#fafafa",unchecked:"#ffffff"}},this.imagePath=c.N.baseUrl+"/public/",this.config.switchColor.checked="#dcdcdc",this.config.color.checked="#dcdcdc",this.config.labels.checked="Change",this.isactive="none"}ngOnInit(){this.getClient()}getClient(){this.dataService.getClient({limit:this.currentLimit,page:this.currentPage}).subscribe(t=>{200===t.status?null!=t.data&&""!=t.data&&(this.clientData=t.data,this.initialized=!0,this.totalRecord=t.totalRecord):this.msg_danger=!0})}onListChangePage(i){this.currentPage=i,this.getClient()}clientDelete(i){confirm("Are you sure to delete this Client")&&this.dataService.clientdelete({_id:i}).subscribe(o=>{200==o.status&&(this.getClient(),this.router.navigate(["/client/view"]))})}searchClient(){this.searchText?(this.currentLimit=1e3,this.currentPage=1):this.currentLimit=10,this.getClient()}changeStatus(){"none"!=this.isactive?(this.config.switchColor.checked="#ffffff",this.config.color.checked="green",this.config.labels.checked="Active"):this.isactive?(this.isactive=!1,this.config.switchColor.unchecked="crimson",this.config.color.unchecked="#423f3f",this.config.labels.unchecked="Deactive"):this.isactive=!0}resetFilter(){this.config.switchColor.checked="#dcdcdc",this.config.color.checked="#dcdcdc",this.config.labels.checked="Change",this.config.switchColor.unchecked="#dcdcdc",this.config.color.unchecked="#dcdcdc",this.config.labels.unchecked="Change",this.isactive="none"}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(d.F0),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-view"]],decls:44,vars:20,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"col-md-12"],[1,"col-md-6"],["type","text","name","search","autocomplete","off","placeholder","\uf002  Start searching a Client by id or name",1,"form-control","mt-4",3,"ngModel","keyup","ngModelChange"],["type","button","routerLink","/client/add",1,"btn","btn-primary","pull-right"],[1,"title"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],["required","",3,"ngModel","disabled","width","height","margin","labels","color","switchColor","fontColor","fontSize","ngModelChange","click"],[1,"btn","btn-sm","btn-info","mr-4",3,"click"],["colspan","6",4,"ngIf"],[4,"ngFor","ngForOf"],["class","aetrio-pagination",4,"ngIf"],["colspan","6"],[1,"alert","alert-dismissable",2,"text-align","center"],[3,"innerHTML"],["alt","logo",2,"height","100px","width","100px",3,"src"],[2,"cursor","pointer",3,"routerLink"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[2,"cursor","pointer","padding-left","15px",3,"click"],["aria-hidden","true",1,"fa","fa-trash-o"],[1,"aetrio-pagination"],[3,"initialPage","count","changePage"],["pagination",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),e._uU(9,"Client List"),e.qZA()(),e.TgZ(10,"div",9)(11,"div",4)(12,"div",10)(13,"input",11),e.NdJ("keyup",function(){return t.searchClient()})("ngModelChange",function(a){return t.searchText=a}),e.qZA()(),e.TgZ(14,"div",10)(15,"button",12),e._uU(16,"Add Client"),e.qZA()()(),e.TgZ(17,"div",10),e._UZ(18,"h4",13),e.qZA()(),e.TgZ(19,"div",14)(20,"table",15)(21,"thead")(22,"tr")(23,"th"),e._uU(24,"Client Name"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Description"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Image"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Status "),e.TgZ(31,"ng-toggle",16),e.NdJ("ngModelChange",function(a){return t.isactive=a})("click",function(){return t.changeStatus()}),e.qZA(),e.TgZ(32,"a",17),e.NdJ("click",function(){return t.resetFilter()}),e._uU(33,"Reset"),e.qZA()(),e.TgZ(34,"th"),e._uU(35,"Created At"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Action"),e.qZA()()(),e.TgZ(38,"tbody"),e.YNc(39,L,3,0,"td",18),e.YNc(40,Y,16,10,"tr",19),e.ALo(41,"activefilter"),e.ALo(42,"filter"),e.qZA()(),e.YNc(43,E,3,2,"div",20),e.qZA()()()()()),2&i&&(e.xp6(13),e.Q6J("ngModel",t.searchText),e.xp6(18),e.Q6J("ngModel",t.isactive)("disabled",t.config.disabled)("width",t.config.width)("height",t.config.height)("margin",t.config.margin)("labels",t.config.labels)("color",t.config.color)("switchColor",t.config.switchColor)("fontColor",t.config.fontColor)("fontSize",t.config.fontSize),e.xp6(8),e.Q6J("ngIf",t.msg_danger),e.xp6(1),e.Q6J("ngForOf",e.xi3(41,14,e.xi3(42,17,t.clientData,t.searchText),t.isactive)),e.xp6(3),e.Q6J("ngIf",t.totalRecord>0&&!t.searchText))},dependencies:[g.sg,g.O5,d.rH,d.yS,s.Fj,s.JJ,s.Q7,s.On,J.Q,A.sX,g.uU,T.Z,F.L],styles:[".aetrio-pagination[_ngcontent-%COMP%]{display:inline-block;width:100%;text-align:center;background-color:#36aef5}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#423f3f;border-color:#423f3f}"]}),n})();const P=[{path:"add",component:b,canActivate:[m.a]},{path:"view",component:k,canActivate:[m.a]},{path:"edit/:id",component:b,canActivate:[m.a],data:{title:"edit"}},{path:"**",component:k,canActivate:[m.a]}];let Q=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),n})();var O=l(6849),R=l(9771);let z=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,Q,_.UM,s.u5,s.UX,f.JF,Z.TA,O.BlogModule,T.h,A.zb,R.B]}),n})()}}]);