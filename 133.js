"use strict";(self.webpackChunkaetrio_dashboard_angular=self.webpackChunkaetrio_dashboard_angular||[]).push([[133],{8133:(B,Z,s)=>{s.r(Z),s.d(Z,{DownloadModule:()=>V});var c=s(6895),g=s(529),d=s(433),x=s(6913),y=s(9207),C=s(8567),q=s(6849),_=s(3189),l=s(8869),m=s(262),p=s(2843),h=s(2340),t=s(4650);let T=(()=>{class a{constructor(e){this.http=e,this.addDownload=o=>this.http.post(h.N.baseUrl+"/api/download/adddownload",o,this.getRequestHeaders()).pipe((0,m.K)(i=>(0,p._)(i))),this.getDownloadDetails=o=>this.http.post(h.N.baseUrl+"/api/download/admindownloadview",o,this.getRequestHeaders()).pipe((0,m.K)(i=>(0,p._)(i))),this.getDownloadWithId=o=>this.http.post(h.N.baseUrl+"/api/download/getdownloadWithId",o,this.getRequestHeaders()).pipe((0,m.K)(i=>(0,p._)(i))),this.editdownloaddata=(o,n)=>{let i=h.N.baseUrl+"/api/download/editdownloaddata";return n&&(i+=`?id=${n}`),this.http.post(i,o,this.getRequestHeaders()).pipe((0,m.K)(u=>(0,p._)(u)))},this.deletedownload=o=>this.http.post(h.N.baseUrl+"/api/download/deletedownload",o,this.getRequestHeaders()).pipe((0,m.K)(i=>(0,p._)(i)))}getRequestHeaders(){let e;const o=localStorage.getItem("aetrio-token");return e=new g.WM({Authorization:`Bearer ${o}`}),{headers:e}}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(g.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var D=s(6570);function U(a,r){if(1&a&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.throw_msg," ")}}function N(a,r){if(1&a&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.throw_msg," ")}}function I(a,r){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Email is required"),t.qZA())}function F(a,r){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Company is required"),t.qZA())}function E(a,r){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Email is required"),t.qZA())}function J(a,r){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Mobile Number is required"),t.qZA())}let A=(()=>{class a{constructor(e,o,n,i,u){this.formBuilder=e,this.router=o,this.route=n,this.downloadservice=i,this.toastr=u,this.submitted=!1,this.msg_success=!1,this.msg_danger=!1,this.isEdit="edit"===this.route.snapshot.data.title,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"200px",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"position_box",name:"Rajdhani sans-serif"}]},this.hasError=(b,v)=>this.addDownloadForm.controls[b].hasError(v),this.addDownloadForm=this.formBuilder.group({name:["",d.kI.required],company:["",d.kI.required],email:["",d.kI.required],mobile:[""],link:[""]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.isEdit?(this.patchingdata(this.id),this.applyAction="Update"):this.applyAction="Add"}patchingdata(e){this.downloadservice.getDownloadWithId({id:e}).subscribe(n=>{if(200==n.code){let i=n?.result;this.addDownloadForm.patchValue({name:i?.name,description:i?.description,type:i?.type,url_or_email:i?.url_or_email,status:i?.status})}})}onSubmit(){this.submitted=!0;let e=this.addDownloadForm.value;this.addDownloadForm.invalid||(this.isEdit?this.downloadservice.editdownloaddata(e,this.id).subscribe(n=>{200==n.code?(this.toastr.successToastr(n.message),setTimeout(()=>{this.router.navigate(["/download/view"])},2e3)):this.toastr.errorToastr(n.message)}):this.downloadservice.addDownload(e).subscribe(n=>{200==n.code?(this.toastr.successToastr(n.message),setTimeout(()=>{this.router.navigate(["/download/view"])},2e3)):400==n.code&&this.toastr.errorToastr(n.message)}))}onCancel(){this.router.navigate(["/download/view"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.qu),t.Y36(l.F0),t.Y36(l.gz),t.Y36(T),t.Y36(D.eP))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-download"]],decls:48,vars:7,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"min-height","400px","background-size","cover","background-position","center top"],[1,"mask","bg-gradient-info","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"text-white","mt-0","mb-5"],[1,"container-fluid","mt--7"],[1,"col-xl-12","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],["class","alert alert-success alert-dismissable","style","margin-left: 0;",4,"ngIf"],["class","alert alert-danger alert-dismissable","style","margin-left: 0;",4,"ngIf"],[1,"card-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","name","name","autocomplete","off","formControlName","name","placeholder","Name",1,"form-control"],["class","alert-danger",4,"ngIf"],["type","text","name","company","autocomplete","off","formControlName","company","placeholder","Download Company",1,"form-control"],["type","text","name","email","autocomplete","off","formControlName","email","placeholder","Email",1,"form-control"],["type","number","name","mobile","autocomplete","off","formControlName","mobile","placeholder","Mobile Number",1,"form-control"],[1,"box-footer"],["type","submit",1,"btn","btn-primary"],["type","cancel",1,"btn","btn-danger",3,"click"],[1,"alert","alert-success","alert-dismissable",2,"margin-left","0"],[1,"alert","alert-danger","alert-dismissable",2,"margin-left","0"],[1,"alert-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"span",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),t._uU(6,"Download Information "),t.qZA(),t.TgZ(7,"p",6),t._uU(8,"This is your profile page. You can see the progress you've made with your work and manage your projects or assigned tasks"),t.qZA()()()()(),t.TgZ(9,"div",7)(10,"div",3)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13),t._uU(17,"Edit Download"),t.qZA()()(),t.YNc(18,U,2,1,"div",14),t.YNc(19,N,2,1,"div",15),t.qZA(),t.TgZ(20,"div",16)(21,"form",17),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(22,"div",18)(23,"div",19)(24,"label",20),t._uU(25,"Name : "),t.qZA(),t._UZ(26,"input",21),t.YNc(27,I,2,0,"span",22),t.qZA(),t.TgZ(28,"div",19)(29,"label",20),t._uU(30,"Company"),t.qZA(),t._UZ(31,"input",23),t.YNc(32,F,2,0,"span",22),t.qZA(),t.TgZ(33,"div",19)(34,"label",20),t._uU(35,"Email"),t.qZA(),t._UZ(36,"input",24),t.YNc(37,E,2,0,"span",22),t.qZA(),t.TgZ(38,"div",19)(39,"label",20),t._uU(40,"Mobile Number"),t.qZA(),t._UZ(41,"input",25),t.YNc(42,J,2,0,"span",22),t.qZA(),t.TgZ(43,"div",26)(44,"button",27),t._uU(45,"Submit"),t.qZA(),t.TgZ(46,"button",28),t.NdJ("click",function(){return o.onCancel()}),t._uU(47,"Cancel"),t.qZA()()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("ngIf",o.msg_success),t.xp6(1),t.Q6J("ngIf",o.msg_danger),t.xp6(2),t.Q6J("formGroup",o.addDownloadForm),t.xp6(6),t.Q6J("ngIf",o.submitted&&o.hasError("name","required")),t.xp6(5),t.Q6J("ngIf",o.submitted&&o.hasError("company","required")),t.xp6(5),t.Q6J("ngIf",o.submitted&&o.hasError("email","required")),t.xp6(5),t.Q6J("ngIf",o.submitted&&o.hasError("mobile","required")))},dependencies:[c.O5,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u]}),a})();var f=s(2710),M=s(8601);function R(a,r){1&a&&(t.TgZ(0,"td",19)(1,"div",20),t._uU(2," Download List is Empty "),t.qZA()())}function S(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function Y(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index,o=t.oxw();t.xp6(1),t.Oqu(e+1+(o.currentPage-1)*o.currentLimit)}}function k(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,S,2,1,"td",21),t.YNc(2,Y,2,1,"td",21),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",22),t._UZ(16,"i",23),t.qZA(),t.TgZ(17,"a",24),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteDownload(i._id))}),t._UZ(18,"i",25),t.qZA()()()}if(2&a){const e=r.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",1==o.currentPage),t.xp6(1),t.Q6J("ngIf",1!=o.currentPage),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.company),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.mobile),t.xp6(2),t.Oqu(t.xi3(13,8,e.created_at,"dd/MMM/yyyy hh:mm a")),t.xp6(3),t.MGl("routerLink","/download/edit/",e._id,"")}}function P(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",26)(1,"app-pagination",27,28),t.NdJ("changePage",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onListChangePage(n))}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("initialPage",e.currentPage)("count",e.totalRecord)}}let L=(()=>{class a{constructor(e,o,n,i,u){this.router=e,this.downloadService=o,this.toaster=n,this.modalService=i,this.formBuilder=u,this.msg_danger=!1,this.submitted=!1,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"200px",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"career_box",name:"Rajdhani sans-serif"}]},this.currentPage=1,this.initialized=!1,this.currentLimit=10,this.totalRecord=0,this.searchText="",this.closeResult="",this.modalReference=null,this.hasError=(b,v)=>this.addDownloadEmailForm.controls[b].hasError(v),this.addDownloadEmailForm=this.formBuilder.group({email:["",[]],subject:["",[d.kI.required,d.kI.maxLength(255)]],content:["",d.kI.required]})}ngOnInit(){this.get_downloadData()}get_downloadData(){this.downloadService.getDownloadDetails({limit:this.currentLimit,page:this.currentPage}).subscribe(o=>{200==o.code&&(null!=o.result&&""!=o.result?(this.downloadData=o.result,this.totalRecord=o?.count,window.scroll(0,0)):(this.msg_danger=!0,this.toaster.errorToastr(o.message)))})}onListChangePage(e){this.currentPage=e,this.get_downloadData()}deleteDownload(e){confirm("Are you sure to delete this Download Job")&&this.downloadService.deletedownload({id:e}).subscribe(n=>{200==n.code&&(this.get_downloadData(),this.router.navigate(["/download/view"]))})}searchDownload(){this.searchText?(this.currentLimit=1e3,this.currentPage=1):this.currentLimit=10,this.get_downloadData()}open(e,o){this.selectedBanner=o,this.modalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{this.closeResult=`Closed with: ${n}`},n=>{this.closeResult=`Dismissed ${this.getDismissReason(n)}`})}sendAllopen(e){this.modalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{this.closeResult=`Closed with: ${o}`},o=>{this.closeResult=`Dismissed ${this.getDismissReason(o)}`})}getDismissReason(e){return e===f.If.ESC?"by pressing ESC":e===f.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}onCancel(){this.router.navigate(["/download/view"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.F0),t.Y36(T),t.Y36(D.eP),t.Y36(f.FF),t.Y36(d.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view-download"]],decls:43,vars:7,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"col-md-12"],[1,"col-md-6"],[1,"title"],["type","text","name","search","autocomplete","off","placeholder","\uf002  Start searching for a Download by id or name or email",1,"form-control",3,"ngModel","keyup","ngModelChange"],["type","button","routerLink","/download/add",1,"btn","btn-primary","pull-right"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],["colspan","5",4,"ngIf"],[4,"ngFor","ngForOf"],["class","aetrio-pagination",4,"ngIf"],["colspan","5"],[1,"alert","alert-dismissable",2,"text-align","center"],[4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[2,"cursor","pointer","padding-left","15px",3,"click"],["aria-hidden","true",1,"fa","fa-trash-o"],[1,"aetrio-pagination"],[3,"initialPage","count","changePage"],["pagination",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),t._uU(9,"Download List"),t.qZA()(),t.TgZ(10,"div",9)(11,"div",4)(12,"div",10)(13,"h4",11)(14,"input",12),t.NdJ("keyup",function(){return o.searchDownload()})("ngModelChange",function(i){return o.searchText=i}),t.qZA()()(),t.TgZ(15,"div",10)(16,"button",13),t._uU(17,"Add Download"),t.qZA()()(),t.TgZ(18,"div",10),t._UZ(19,"h4",11),t.qZA()(),t.TgZ(20,"div",14)(21,"table",15)(22,"thead")(23,"tr")(24,"th"),t._uU(25,"Sl No"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Name"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Company"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Email"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Mobile Number"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Created Date"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Action"),t.qZA()()(),t.TgZ(38,"tbody"),t.YNc(39,R,3,0,"td",16),t.YNc(40,k,19,11,"tr",17),t.ALo(41,"filter"),t.qZA()(),t.YNc(42,P,3,2,"div",18),t.qZA()()()()()),2&e&&(t.xp6(14),t.Q6J("ngModel",o.searchText),t.xp6(25),t.Q6J("ngIf",o.msg_danger),t.xp6(1),t.Q6J("ngForOf",t.xi3(41,4,o.downloadData,o.searchText)),t.xp6(2),t.Q6J("ngIf",o.totalRecord>0&&!o.searchText))},dependencies:[c.sg,c.O5,l.rH,l.yS,d.Fj,d.JJ,d.On,M.Q,c.uU,_.Z],styles:[".aetrio-pagination[_ngcontent-%COMP%]{display:inline-block;width:100%;text-align:center;background-color:#36aef5}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#423f3f;border-color:#423f3f}"]}),a})();var w=s(5826);const O=[{path:"add",component:A,canActivate:[w.a],data:{title:"add"}},{path:"view",component:L,canActivate:[w.a]},{path:"edit/:id",component:A,canActivate:[w.a],data:{title:"edit"}}];let Q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[l.Bz.forChild(O),l.Bz]}),a})(),V=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.ez,Q,g.JF,d.u5,d.UX,x.TA,y.UM,C.JX,q.BlogModule,_.h]}),a})()}}]);