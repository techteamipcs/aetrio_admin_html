"use strict";(self.webpackChunkaetrio_dashboard_angular=self.webpackChunkaetrio_dashboard_angular||[]).push([[962],{7962:(G,v,c)=>{c.r(v),c.d(v,{SubscriberModule:()=>B});var p=c(6895),h=c(529),a=c(433),q=c(6913),Z=c(9207),w=c(8567),y=c(6849),l=c(8869),f=c(5826),d=c(262),b=c(2843),m=c(2340),e=c(4650);let T=(()=>{class r{constructor(t){this.http=t,this.addSubscriber=i=>this.http.post(m.N.baseUrl+"/api/subscriber/addsubscriber",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n))),this.getSubscriberDetails=i=>this.http.post(m.N.baseUrl+"/api/subscriber/adminsubscriberview",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n))),this.getSubscriberWithId=i=>this.http.post(m.N.baseUrl+"/api/subscriber/getsubscriberWithId",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n))),this.editsubscriberdata=(i,s)=>{let n=m.N.baseUrl+"/api/subscriber/editsubscriberdata";return s&&(n+=`?id=${s}`),this.http.post(n,i,this.getRequestHeaders()).pipe((0,d.K)(u=>(0,b._)(u)))},this.deletesubscriber=i=>this.http.post(m.N.baseUrl+"/api/subscriber/deletesubscriber",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n))),this.sendMail=i=>this.http.post(m.N.baseUrl+"/api/subscriber/sendemail",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n))),this.sendMailAll=i=>this.http.post(m.N.baseUrl+"/api/subscriber/sendemailAll",i,this.getRequestHeaders()).pipe((0,d.K)(n=>(0,b._)(n)))}getRequestHeaders(){let t;const i=localStorage.getItem("aetrio-token");return t=new h.WM({Authorization:`Bearer ${i}`}),{headers:t}}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(h.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=c(6570);function U(r,o){if(1&r&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.throw_msg," ")}}function E(r,o){if(1&r&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.throw_msg," ")}}function J(r,o){1&r&&(e.TgZ(0,"span",28),e._uU(1,"Email is required"),e.qZA())}let A=(()=>{class r{constructor(t,i,s,n,u){this.formBuilder=t,this.router=i,this.route=s,this.subscriberservice=n,this.toastr=u,this.submitted=!1,this.msg_success=!1,this.msg_danger=!1,this.isEdit="edit"===this.route.snapshot.data.title,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"200px",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"subscriber_box",name:"Rajdhani sans-serif"}]},this.hasError=(g,S)=>this.addSubscriberForm.controls[g].hasError(S),this.addSubscriberForm=this.formBuilder.group({email:["",a.kI.required]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.isEdit?(this.patchingdata(this.id),this.applyAction="Update"):this.applyAction="Add"}patchingdata(t){this.subscriberservice.getSubscriberWithId({id:t}).subscribe(s=>{if(200==s.code){let n=s?.result;this.addSubscriberForm.patchValue({email:n?.email})}})}onSubmit(){this.submitted=!0;let t=this.addSubscriberForm.value;this.addSubscriberForm.invalid||(this.isEdit?this.subscriberservice.editsubscriberdata(t,this.id).subscribe(s=>{200==s.code?(this.toastr.successToastr(s.message),setTimeout(()=>{this.router.navigate(["/subscriber/view"])},2e3)):this.toastr.errorToastr(s.message)}):this.subscriberservice.addSubscriber(t).subscribe(s=>{200==s.code?(this.toastr.successToastr(s.message),setTimeout(()=>{this.router.navigate(["/subscriber/view"])},2e3)):400==s.code&&this.toastr.errorToastr(s.message)}))}onCancel(){this.router.navigate(["/subscriber/view"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(l.F0),e.Y36(l.gz),e.Y36(T),e.Y36(x.eP))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-subscriber"]],decls:33,vars:4,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"min-height","400px","background-size","cover","background-position","center top"],[1,"mask","bg-gradient-info","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"text-white","mt-0","mb-5"],[1,"container-fluid","mt--7"],[1,"col-xl-12","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],["class","alert alert-success alert-dismissable","style","margin-left: 0;",4,"ngIf"],["class","alert alert-danger alert-dismissable","style","margin-left: 0;",4,"ngIf"],[1,"card-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","name","email","autocomplete","off","formControlName","email","placeholder","Email",1,"form-control"],["class","alert-danger",4,"ngIf"],[1,"box-footer"],["type","submit",1,"btn","btn-primary"],["type","cancel",1,"btn","btn-danger",3,"click"],[1,"alert","alert-success","alert-dismissable",2,"margin-left","0"],[1,"alert","alert-danger","alert-dismissable",2,"margin-left","0"],[1,"alert-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Subscriber Information "),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"This is your profile page. You can see the progress you've made with your work and manage your projects or assigned tasks"),e.qZA()()()()(),e.TgZ(9,"div",7)(10,"div",3)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13),e._uU(17,"Edit Subscriber"),e.qZA()()(),e.YNc(18,U,2,1,"div",14),e.YNc(19,E,2,1,"div",15),e.qZA(),e.TgZ(20,"div",16)(21,"form",17),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(22,"div",18)(23,"div",19)(24,"label",20),e._uU(25,"Email : "),e.qZA(),e._UZ(26,"input",21),e.YNc(27,J,2,0,"span",22),e.qZA(),e.TgZ(28,"div",23)(29,"button",24),e._uU(30,"Submit"),e.qZA(),e.TgZ(31,"button",25),e.NdJ("click",function(){return i.onCancel()}),e._uU(32,"Cancel"),e.qZA()()()()()()()()()),2&t&&(e.xp6(18),e.Q6J("ngIf",i.msg_success),e.xp6(1),e.Q6J("ngIf",i.msg_danger),e.xp6(2),e.Q6J("formGroup",i.addSubscriberForm),e.xp6(6),e.Q6J("ngIf",i.submitted&&i.hasError("email","required")))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),r})();var _=c(2710),N=c(8601),C=c(3189);function F(r,o){1&r&&(e.TgZ(0,"td",24)(1,"div",25),e._uU(2," Subscriber List is Empty "),e.qZA()())}function M(r,o){if(1&r&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&r){const t=e.oxw().index;e.xp6(1),e.Oqu(t+1)}}function I(r,o){if(1&r&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&r){const t=e.oxw().index,i=e.oxw();e.xp6(1),e.Oqu(t+1+(i.currentPage-1)*i.currentLimit)}}function k(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,M,2,1,"td",26),e.YNc(2,I,2,1,"td",26),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td")(9,"a",27),e._UZ(10,"i",28),e.qZA(),e.TgZ(11,"a",29),e.NdJ("click",function(){const n=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteSubscriber(n._id))}),e._UZ(12,"i",30),e.qZA()(),e.TgZ(13,"td")(14,"a",29),e.NdJ("click",function(){const n=e.CHM(t).$implicit,u=e.oxw(),g=e.MAs(43);return e.KtG(u.open(g,n))}),e._UZ(15,"i",31),e.qZA()()()}if(2&r){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",1==i.currentPage),e.xp6(1),e.Q6J("ngIf",1!=i.currentPage),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(e.xi3(7,5,t.created_at,"dd/MMM/yyyy hh:mm a")),e.xp6(3),e.MGl("routerLink","/subscriber/edit/",t._id,"")}}function R(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"app-pagination",33,34),e.NdJ("changePage",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onListChangePage(s))}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("initialPage",t.currentPage)("count",t.totalRecord)}}function Y(r,o){1&r&&(e.TgZ(0,"span",50),e._uU(1,"Email is required"),e.qZA())}function V(r,o){1&r&&(e.TgZ(0,"span",50),e._uU(1,"Subject is required"),e.qZA())}function j(r,o){1&r&&(e.TgZ(0,"span",50),e._uU(1,"Content is required"),e.qZA())}function P(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",35)(1,"h4",36),e._uU(2,"Send Email to Subscriber"),e.qZA(),e.TgZ(3,"button",37),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.dismiss("Cross click"))}),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"div",38)(6,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(7,"div",40)(8,"div",41)(9,"label",42),e._uU(10,"Email : "),e.qZA(),e._UZ(11,"input",43),e.YNc(12,Y,2,0,"span",44),e.qZA(),e.TgZ(13,"div",41)(14,"label",45),e._uU(15,"Subject : "),e.qZA(),e._UZ(16,"input",46),e.YNc(17,V,2,0,"span",44),e.qZA(),e.TgZ(18,"div",41)(19,"label",42),e._uU(20,"Content"),e.qZA(),e._UZ(21,"angular-editor",47),e.YNc(22,j,2,0,"span",44),e.qZA(),e.TgZ(23,"div",48)(24,"button",49),e._uU(25,"Submit"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.addSubscriberEmailForm),e.xp6(5),e.s9C("ngModel",t.selectedBanner.email),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.hasError("email","required")),e.xp6(5),e.Q6J("ngIf",t.submitted&&t.hasError("subject","required")),e.xp6(4),e.Q6J("config",t.editorConfig),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.hasError("content","required"))}}function H(r,o){1&r&&(e.TgZ(0,"span",50),e._uU(1,"Subject is required"),e.qZA())}function L(r,o){1&r&&(e.TgZ(0,"span",50),e._uU(1,"Content is required"),e.qZA())}function Q(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",35)(1,"h4",36),e._uU(2,"Send Email to Subscriber"),e.qZA(),e.TgZ(3,"button",37),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.dismiss("Cross click"))}),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"div",38)(6,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.SendAll())}),e.TgZ(7,"div",40)(8,"div",41)(9,"label",45),e._uU(10,"Subject : "),e.qZA(),e._UZ(11,"input",46),e.YNc(12,H,2,0,"span",44),e.qZA(),e.TgZ(13,"div",41)(14,"label",42),e._uU(15,"Content"),e.qZA(),e._UZ(16,"angular-editor",47),e.YNc(17,L,2,0,"span",44),e.qZA(),e.TgZ(18,"div",48)(19,"button",49),e._uU(20,"Submit All"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.addSubscriberEmailForm),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.hasError("subject","required")),e.xp6(4),e.Q6J("config",t.editorConfig),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.hasError("content","required"))}}const K=[{path:"add",component:A,canActivate:[f.a],data:{title:"add"}},{path:"view",component:(()=>{class r{constructor(t,i,s,n,u){this.router=t,this.subscriberService=i,this.toaster=s,this.modalService=n,this.formBuilder=u,this.msg_danger=!1,this.submitted=!1,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"200px",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"career_box",name:"Rajdhani sans-serif"}]},this.currentPage=1,this.initialized=!1,this.currentLimit=10,this.totalRecord=0,this.searchText="",this.closeResult="",this.modalReference=null,this.hasError=(g,S)=>this.addSubscriberEmailForm.controls[g].hasError(S),this.addSubscriberEmailForm=this.formBuilder.group({email:["",[]],subject:["",[a.kI.required,a.kI.maxLength(255)]],content:["",a.kI.required]})}ngOnInit(){this.get_subscriberData()}get_subscriberData(){this.subscriberService.getSubscriberDetails({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&(null!=i.result&&""!=i.result?(this.subscriberData=i.result,this.totalRecord=i?.count,window.scroll(0,0)):(this.msg_danger=!0,this.toaster.errorToastr(i.message)))})}onListChangePage(t){this.currentPage=t,this.get_subscriberData()}deleteSubscriber(t){confirm("Are you sure to delete this Subscriber Job")&&this.subscriberService.deletesubscriber({id:t}).subscribe(s=>{200==s.code&&(this.get_subscriberData(),this.router.navigate(["/subscriber/view"]))})}searchSubscriber(){this.searchText?(this.currentLimit=1e3,this.currentPage=1):this.currentLimit=10,this.get_subscriberData()}open(t,i){this.selectedBanner=i,this.modalReference=this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}sendAllopen(t){this.modalReference=this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(t){return t===_.If.ESC?"by pressing ESC":t===_.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}onCancel(){this.router.navigate(["/subscriber/view"])}onSubmit(){this.submitted=!0,this.addSubscriberEmailForm.invalid||this.subscriberService.sendMail(this.addSubscriberEmailForm.value).subscribe(i=>{200==i.code?(this.toaster.successToastr(i.message),setTimeout(()=>{window.location.reload(),this.router.navigate(["/subscriber/view"])},2e3)):this.toaster.errorToastr(i.message)})}SendAll(){this.submitted=!0,this.addSubscriberEmailForm.invalid||this.subscriberService.sendMailAll(this.addSubscriberEmailForm.value).subscribe(i=>{200==i.code?(this.toaster.successToastr(i.message),setTimeout(()=>{window.location.reload(),this.router.navigate(["/subscriber/view"])},2e3)):this.toaster.errorToastr(i.message)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.F0),e.Y36(T),e.Y36(x.eP),e.Y36(_.FF),e.Y36(a.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-view-subscriber"]],decls:46,vars:7,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"col-md-12"],[1,"col-md-6"],[1,"title"],["type","text","name","search","autocomplete","off","placeholder","\uf002  Start searching for a Subscriber by id or name or email",1,"form-control",3,"ngModel","keyup","ngModelChange"],[1,"col-md-3"],["type","button","routerLink","/subscriber/add",1,"btn","btn-primary","pull-right"],["type","button",1,"btn","btn-primary","pull-right",3,"click"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],["colspan","5",4,"ngIf"],[4,"ngFor","ngForOf"],["class","aetrio-pagination",4,"ngIf"],["style","z-index: 0;"],["content",""],["content1",""],["colspan","5"],[1,"alert","alert-dismissable",2,"text-align","center"],[4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[2,"cursor","pointer","padding-left","15px",3,"click"],["aria-hidden","true",1,"fa","fa-trash-o"],["aria-hidden","true",1,"fa","fa-envelope-o"],[1,"aetrio-pagination"],[3,"initialPage","count","changePage"],["pagination",""],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-describedby","modal-title",1,"btn","btn-danger",3,"click"],[1,"modal-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","name","email","autocomplete","off","formControlName","email","placeholder","Email","disabled","",1,"form-control",3,"ngModel"],["class","alert-danger",4,"ngIf"],["for","exampleInputsubject"],["type","text","name","subject","autocomplete","off","formControlName","subject","placeholder","subject",1,"form-control"],["name","content","formControlName","content",3,"config"],[1,"modal-footer","box-footer"],["type","submit",1,"btn","btn-primary"],[1,"alert-danger"]],template:function(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),e._uU(9,"Subscriber List"),e.qZA()(),e.TgZ(10,"div",9)(11,"div",4)(12,"div",10)(13,"h4",11)(14,"input",12),e.NdJ("keyup",function(){return i.searchSubscriber()})("ngModelChange",function(u){return i.searchText=u}),e.qZA()()(),e.TgZ(15,"div",13)(16,"button",14),e._uU(17,"Add Subscriber"),e.qZA()(),e.TgZ(18,"div",13)(19,"button",15),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(45);return e.KtG(i.sendAllopen(u))}),e._uU(20,"Send All"),e.qZA()()(),e.TgZ(21,"div",10),e._UZ(22,"h4",11),e.qZA()(),e.TgZ(23,"div",16)(24,"table",17)(25,"thead")(26,"tr")(27,"th"),e._uU(28,"Sl No"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Email"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Date"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Action"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"Send Email"),e.qZA()()(),e.TgZ(37,"tbody"),e.YNc(38,F,3,0,"td",18),e.YNc(39,k,16,8,"tr",19),e.ALo(40,"filter"),e.qZA()(),e.YNc(41,R,3,2,"div",20),e.qZA()()()(),e.YNc(42,P,26,6,"ng-template",21,22,e.W1O),e.YNc(44,Q,21,4,"ng-template",21,23,e.W1O),e.qZA()}2&t&&(e.xp6(14),e.Q6J("ngModel",i.searchText),e.xp6(24),e.Q6J("ngIf",i.msg_danger),e.xp6(1),e.Q6J("ngForOf",e.xi3(40,4,i.subscriberData,i.searchText)),e.xp6(2),e.Q6J("ngIf",i.totalRecord>0&&!i.searchText))},dependencies:[p.sg,p.O5,l.rH,l.yS,a._Y,a.Fj,a.JJ,a.JL,a.On,a.sg,a.u,Z.s6,N.Q,p.uU,C.Z],styles:[".aetrio-pagination[_ngcontent-%COMP%]{display:inline-block;width:100%;text-align:center;background-color:#36aef5}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#423f3f;border-color:#423f3f}"]}),r})(),canActivate:[f.a]},{path:"edit/:id",component:A,canActivate:[f.a],data:{title:"edit"}}];let O=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.Bz.forChild(K),l.Bz]}),r})(),B=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.ez,O,p.ez,h.JF,a.u5,a.UX,q.TA,Z.UM,w.JX,y.BlogModule,C.h]}),r})()}}]);